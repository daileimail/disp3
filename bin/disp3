#!/usr/bin/env node

var fs = require("fs");
var path = require("path");
var core = require("../src/core");

var libFile = require("../lib/nodejs/file");

var node = process.argv[0], //nodejs binary
		dispCmd = process.argv[1], //this file
		task = process.argv[2];

if(!task)	task = "main";

var projectDir = path.resolve(".");
var rootDir;
if(process.env.rootDir) rootDir = path.resolve(process.env.rootDir);
else rootDir = path.resolve(__dirname + "/..");

if(!core.run(projectDir, rootDir, task)){
	console.error("generate failed");
	process.exit(1);
}
console.log("generate success");


